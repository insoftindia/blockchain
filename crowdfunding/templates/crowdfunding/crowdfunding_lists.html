{% extends 'crowdfunding/index.html' %}

{% load staticfiles %}
{% block header %}
<!-- Page Header -->
<!-- Set your background image for this header on the line below. -->
<header class="intro-header" style="background-image: url('/static/images/home-bg.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="site-heading">
                    <h1>Crowdfunding</h1>
                    <hr class="small">
                    <span class="subheading">Crowdfunding by Insoft</span>
                </div>
            </div>
        </div>
    </div>
</header>
{% endblock %}

{% block js %}
    {{ block.super }}
    <script src="{% static 'js/proposal_list_and_new.js' %}"></script>
{% endblock %}

{% block content %}

<a id="post-proposal-button" title="Post Proposal!" data-toggle="modal" data-target="#post-proposal"><i class="fa fa-pencil fa-lg" aria-hidden="true"></i></a>
<!-- Modal -->
<div class="modal fade" id="post-proposal" role="dialog">
    <form method="POST" id="post-proposal-form" action="{% url 'crowdfunding:create_crowdfunding' %}">
        {% csrf_token %}
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Create Crowdfunding</h4>
                </div>
                <div class="modal-body color-gray">
                    <div class="form-group row">
                        <label for="group-type" class="col-xs-4 col-form-label">Group</label>
                        <div class="col-xs-8">
                            <div class="form-group">
                                <select class="form-control" name="group_type" id="group-type">
                                    {% for g in group_type %}
                                        <option value="{{ g }}">{{ g }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="group-total-amount-input" class="col-xs-4 col-form-label">Group Total Amt</label>
                        <div class="col-xs-8">
                            <input class="form-control" type="number" name="group_total_amount" id="group-total-amount-input" readonly>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="title-input" class="col-xs-4 col-form-label">Title</label>
                        <div class="col-xs-8">
                            <input class="form-control" type="text" name="title" id="title-input">
                        </div>
                    </div>
                    <div class="form-group row m-b-30">
                        <label for="amount-input" class="col-xs-4 col-form-label">Amount</label>
                        <div class="col-xs-8">
                            <input class="form-control" type="number" name="amount" id="amount-input">
                        </div>
                        <div class="amount-warning-msg text-danger" style="display: none;">Sorry, proposal amount is greater than group total amount</div>
                    </div>
                    <div class="form-group row">
                        <label for="end-date-input" class="col-xs-4 col-form-label">End Date</label>
                        <div class="col-xs-8">
                            <input class="form-control" type="date" name="end_date" id="end-date-input">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="text-input" class="col-xs-4 col-form-label">Text</label>
                        <div class="col-xs-8">
                            <textarea class="form-control" name="text" id="text-input"></textarea>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" name="type" value="post-proposal" class="btn btn-default btn-align-submit" id="proposal-post">Post</button>
                </div>
            </div>
        </div>
    </form>
</div>

<!-- Main Content -->
<div class="container">
    <div class="row">
        <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            {% for post in posts %}
                <div class="post-preview">
                    <a href="{% url 'crowdfunding:crowdfunding_detail' pk=post.pk %}">
                        <h2 class="post-title">
                            {{ post.title }}
                        </h2>
                    </a>
                    <p class="post-meta">Posted by <a href="#">{{ post.author|title }}</a> on {{ post.published_datetime|date:"F d, Y" }}</p>
                </div>
                <hr/>
            {% endfor %}
            <!-- Pager -->
            <!--<ul class="pager">-->
                <!--<li class="next">-->
                    <!--<a href="#">Older Posts &rarr;</a>-->
                <!--</li>-->
            <!--</ul>-->
            <!--<div class="pagination">-->
                <!--<span class="step-links">-->
                    <!--{% if posts.has_previous %}-->
                        <!--<a href="?page={{ posts.previous_page_number }}">previous</a>-->
                    <!--{% endif %}-->

                    <!--<span class="current">-->
                        <!--Page {{ posts.number }} of {{ posts.paginator.num_pages }}.-->
                    <!--</span>-->

                    <!--{% if posts.has_next %}-->
                        <!--<a href="?page={{ posts.next_page_number }}">next</a>-->
                    <!--{% endif %}-->
                <!--</span>-->
            <!--</div>-->

            {% if posts.has_other_pages %}
                <div class="col-md-12 text-right">
                    <ul class="pagination">
                        {% if posts.has_previous %}
                            <li><a href="?page={{ posts.previous_page_number }}">&laquo;</a></li>
                        {% else %}
                            <li class="disabled"><span>&laquo;</span></li>
                        {% endif %}
                        {% for i in posts.paginator.page_range %}
                            {% if posts.number == i %}
                                <li class="active"><span>{{ i }} <span class="sr-only">(current)</span></span></li>
                            {% else %}
                                <li><a href="?page={{ i }}">{{ i }}</a></li>
                            {% endif %}
                        {% endfor %}
                        {% if users.has_next %}
                            <li><a href="?page={{ posts.next_page_number }}">&raquo;</a></li>
                        {% else %}
                            <li class="disabled"><span>&raquo;</span></li>
                        {% endif %}
                    </ul>
                </div>
            {% endif %}


        </div>
    </div>
</div>

<hr>

{% endblock %}


